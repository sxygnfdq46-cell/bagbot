/**
 * LEVEL 11.4 — COLLECTIVE AURA OVERLAY
 * 
 * GPU-accelerated visual effects for collective intelligence:
 * - Crowd shimmer (many-particle field effect)
 * - Pressure distortion (spatial warping)
 * - Mass-intent glow (directional light)
 * - Field-wave pulses (rhythmic ripples)
 * 
 * Effects render BEHIND charts/panels/strategic pages.
 * Zero data dependency — purely visual atmosphere.
 */

/* ================================ */
/* BASE COLLECTIVE FIELD            */
/* ================================ */

.collective-field {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: 0;
  overflow: hidden;
  opacity: 0.7;
}

.collective-field-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  will-change: transform, opacity;
}

/* ================================ */
/* CROWD SHIMMER                    */
/* ================================ */

.crowd-shimmer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(
    circle at 50% 50%,
    rgba(147, 51, 234, 0.03) 0%,
    rgba(79, 70, 229, 0.02) 40%,
    transparent 70%
  );
  animation: shimmerPulse 4s ease-in-out infinite;
  mix-blend-mode: screen;
  filter: blur(40px);
}

@keyframes shimmerPulse {
  0%,
  100% {
    opacity: 0.5;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.05);
  }
}

/* Shimmer intensity variants */
.crowd-shimmer.intensity-low {
  opacity: 0.3;
  animation-duration: 6s;
}

.crowd-shimmer.intensity-medium {
  opacity: 0.6;
  animation-duration: 4s;
}

.crowd-shimmer.intensity-high {
  opacity: 0.9;
  animation-duration: 2s;
}

.crowd-shimmer.intensity-extreme {
  opacity: 1;
  animation-duration: 1s;
  filter: blur(60px);
}

/* ================================ */
/* PRESSURE DISTORTION              */
/* ================================ */

.pressure-distortion {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(
    ellipse at center,
    rgba(239, 68, 68, 0.05) 0%,
    rgba(239, 68, 68, 0.02) 40%,
    transparent 70%
  );
  animation: pressureWarp 3s ease-in-out infinite;
  mix-blend-mode: multiply;
  filter: blur(50px);
}

@keyframes pressureWarp {
  0%,
  100% {
    transform: scale(1) rotate(0deg);
    border-radius: 50%;
  }
  25% {
    transform: scale(1.1, 0.9) rotate(2deg);
    border-radius: 40% 60% 50% 50%;
  }
  50% {
    transform: scale(0.9, 1.1) rotate(-2deg);
    border-radius: 60% 40% 50% 50%;
  }
  75% {
    transform: scale(1.05, 0.95) rotate(1deg);
    border-radius: 50% 50% 60% 40%;
  }
}

/* Pressure variants */
.pressure-distortion.level-low {
  opacity: 0.2;
  animation-duration: 5s;
}

.pressure-distortion.level-medium {
  opacity: 0.4;
  animation-duration: 3s;
}

.pressure-distortion.level-high {
  opacity: 0.7;
  animation-duration: 2s;
  background: radial-gradient(
    ellipse at center,
    rgba(239, 68, 68, 0.08) 0%,
    rgba(239, 68, 68, 0.04) 40%,
    transparent 70%
  );
}

.pressure-distortion.level-extreme {
  opacity: 1;
  animation-duration: 1s;
  background: radial-gradient(
    ellipse at center,
    rgba(239, 68, 68, 0.12) 0%,
    rgba(239, 68, 68, 0.06) 40%,
    transparent 70%
  );
  filter: blur(70px);
}

/* ================================ */
/* MASS-INTENT GLOW                 */
/* ================================ */

.mass-intent-glow {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 80%;
  height: 80%;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  mix-blend-mode: screen;
  filter: blur(80px);
  animation: intentPulse 5s ease-in-out infinite;
}

@keyframes intentPulse {
  0%,
  100% {
    opacity: 0.4;
    transform: translate(-50%, -50%) scale(1);
  }
  50% {
    opacity: 0.7;
    transform: translate(-50%, -50%) scale(1.1);
  }
}

/* Intent direction variants */
.mass-intent-glow.direction-bullish {
  background: radial-gradient(
    circle at center,
    rgba(34, 197, 94, 0.15) 0%,
    rgba(34, 197, 94, 0.08) 40%,
    transparent 70%
  );
}

.mass-intent-glow.direction-bearish {
  background: radial-gradient(
    circle at center,
    rgba(239, 68, 68, 0.15) 0%,
    rgba(239, 68, 68, 0.08) 40%,
    transparent 70%
  );
}

.mass-intent-glow.direction-neutral {
  background: radial-gradient(
    circle at center,
    rgba(156, 163, 175, 0.12) 0%,
    rgba(156, 163, 175, 0.06) 40%,
    transparent 70%
  );
}

/* Intent strength variants */
.mass-intent-glow.strength-weak {
  opacity: 0.3;
  animation-duration: 7s;
}

.mass-intent-glow.strength-moderate {
  opacity: 0.5;
  animation-duration: 5s;
}

.mass-intent-glow.strength-strong {
  opacity: 0.8;
  animation-duration: 3s;
}

/* ================================ */
/* FIELD-WAVE PULSES                */
/* ================================ */

.field-wave-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.field-wave {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20%;
  height: 20%;
  border: 2px solid rgba(147, 51, 234, 0.3);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  animation: waveExpand 6s ease-out infinite;
  mix-blend-mode: screen;
}

@keyframes waveExpand {
  0% {
    width: 20%;
    height: 20%;
    opacity: 0.8;
    border-width: 2px;
  }
  100% {
    width: 200%;
    height: 200%;
    opacity: 0;
    border-width: 0.5px;
  }
}

/* Multiple waves (staggered) */
.field-wave:nth-child(2) {
  animation-delay: 2s;
}

.field-wave:nth-child(3) {
  animation-delay: 4s;
}

/* Wave frequency variants */
.field-wave-container.frequency-slow .field-wave {
  animation-duration: 8s;
}

.field-wave-container.frequency-normal .field-wave {
  animation-duration: 6s;
}

.field-wave-container.frequency-fast .field-wave {
  animation-duration: 4s;
}

.field-wave-container.frequency-extreme .field-wave {
  animation-duration: 2s;
}

/* ================================ */
/* PARTICLE SWARM                   */
/* ================================ */

.particle-swarm {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.particle {
  position: absolute;
  width: 3px;
  height: 3px;
  background: rgba(147, 51, 234, 0.5);
  border-radius: 50%;
  animation: particleDrift 15s linear infinite;
  mix-blend-mode: screen;
}

@keyframes particleDrift {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 0;
  }
  10% {
    opacity: 0.6;
  }
  90% {
    opacity: 0.6;
  }
  100% {
    transform: translate(var(--drift-x), var(--drift-y)) scale(0.5);
    opacity: 0;
  }
}

/* Particle variants */
.particle.emotion-fear {
  background: rgba(239, 68, 68, 0.6);
}

.particle.emotion-greed {
  background: rgba(34, 197, 94, 0.6);
}

.particle.emotion-neutral {
  background: rgba(156, 163, 175, 0.5);
}

/* Particle density */
.particle-swarm.density-low .particle {
  animation-duration: 20s;
}

.particle-swarm.density-medium .particle {
  animation-duration: 15s;
}

.particle-swarm.density-high .particle {
  animation-duration: 10s;
}

/* ================================ */
/* COHERENCE GRID                   */
/* ================================ */

.coherence-grid {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: repeating-linear-gradient(
      0deg,
      rgba(147, 51, 234, 0.03) 0px,
      transparent 1px,
      transparent 50px,
      rgba(147, 51, 234, 0.03) 51px
    ),
    repeating-linear-gradient(
      90deg,
      rgba(147, 51, 234, 0.03) 0px,
      transparent 1px,
      transparent 50px,
      rgba(147, 51, 234, 0.03) 51px
    );
  animation: gridShift 20s linear infinite;
  mix-blend-mode: screen;
}

@keyframes gridShift {
  0% {
    transform: translate(0, 0);
  }
  100% {
    transform: translate(50px, 50px);
  }
}

/* Coherence variants */
.coherence-grid.state-scattered {
  opacity: 0.3;
  animation-duration: 30s;
  background-size: 100px 100px;
}

.coherence-grid.state-unified {
  opacity: 0.7;
  animation-duration: 10s;
  background-size: 50px 50px;
}

/* ================================ */
/* MOMENTUM STREAK                  */
/* ================================ */

.momentum-streak {
  position: absolute;
  top: 50%;
  left: 0;
  width: 100%;
  height: 3px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(34, 197, 94, 0.4) 50%,
    transparent 100%
  );
  transform: translateY(-50%);
  animation: streakMove 3s ease-in-out infinite;
  mix-blend-mode: screen;
  filter: blur(5px);
}

@keyframes streakMove {
  0%,
  100% {
    transform: translateY(-50%) translateX(-100%);
    opacity: 0;
  }
  50% {
    transform: translateY(-50%) translateX(0%);
    opacity: 1;
  }
}

/* Momentum direction */
.momentum-streak.direction-bullish {
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(34, 197, 94, 0.5) 50%,
    transparent 100%
  );
  animation-direction: normal;
}

.momentum-streak.direction-bearish {
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(239, 68, 68, 0.5) 50%,
    transparent 100%
  );
  animation-direction: reverse;
}

/* Momentum strength */
.momentum-streak.strength-weak {
  height: 2px;
  opacity: 0.3;
  animation-duration: 5s;
}

.momentum-streak.strength-moderate {
  height: 3px;
  opacity: 0.6;
  animation-duration: 3s;
}

.momentum-streak.strength-strong {
  height: 5px;
  opacity: 0.9;
  animation-duration: 1.5s;
}

/* ================================ */
/* TURBULENCE VORTEX                */
/* ================================ */

.turbulence-vortex {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 60%;
  height: 60%;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  background: radial-gradient(
    circle at center,
    transparent 40%,
    rgba(239, 68, 68, 0.08) 50%,
    rgba(239, 68, 68, 0.04) 60%,
    transparent 80%
  );
  animation: vortexSpin 10s linear infinite;
  mix-blend-mode: multiply;
  filter: blur(40px);
}

@keyframes vortexSpin {
  0% {
    transform: translate(-50%, -50%) rotate(0deg);
  }
  100% {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

/* Turbulence variants */
.turbulence-vortex.level-low {
  opacity: 0.2;
  animation-duration: 15s;
}

.turbulence-vortex.level-moderate {
  opacity: 0.4;
  animation-duration: 10s;
}

.turbulence-vortex.level-high {
  opacity: 0.7;
  animation-duration: 5s;
}

.turbulence-vortex.level-extreme {
  opacity: 1;
  animation-duration: 3s;
  filter: blur(60px);
}

/* ================================ */
/* CONSENSUS RING                   */
/* ================================ */

.consensus-ring {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 50%;
  height: 50%;
  border: 3px solid rgba(147, 51, 234, 0.4);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  animation: ringPulse 4s ease-in-out infinite;
  mix-blend-mode: screen;
}

@keyframes ringPulse {
  0%,
  100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0.6;
    border-width: 3px;
  }
  50% {
    transform: translate(-50%, -50%) scale(1.2);
    opacity: 1;
    border-width: 5px;
  }
}

/* Consensus strength */
.consensus-ring.strength-weak {
  opacity: 0.3;
  border-color: rgba(147, 51, 234, 0.2);
}

.consensus-ring.strength-moderate {
  opacity: 0.6;
  border-color: rgba(147, 51, 234, 0.4);
}

.consensus-ring.strength-strong {
  opacity: 0.9;
  border-color: rgba(147, 51, 234, 0.6);
}

/* ================================ */
/* ALIGNMENT BEAM                   */
/* ================================ */

.alignment-beam {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 2px;
  height: 60%;
  background: linear-gradient(
    to bottom,
    transparent 0%,
    rgba(147, 51, 234, 0.6) 50%,
    transparent 100%
  );
  transform: translate(-50%, -50%) rotate(var(--beam-angle, 0deg));
  animation: beamRotate 8s linear infinite;
  mix-blend-mode: screen;
  filter: blur(3px);
}

@keyframes beamRotate {
  0% {
    transform: translate(-50%, -50%) rotate(0deg);
  }
  100% {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

/* Alignment variants */
.alignment-beam.type-convergence {
  background: linear-gradient(
    to bottom,
    transparent 0%,
    rgba(34, 197, 94, 0.6) 50%,
    transparent 100%
  );
  animation-duration: 6s;
}

.alignment-beam.type-divergence {
  background: linear-gradient(
    to bottom,
    transparent 0%,
    rgba(239, 68, 68, 0.6) 50%,
    transparent 100%
  );
  animation-duration: 4s;
}

.alignment-beam.type-rotation {
  animation-duration: 3s;
}

/* ================================ */
/* CROWD PHASE AURA                 */
/* ================================ */

.crowd-phase-aura {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  mix-blend-mode: screen;
  filter: blur(100px);
  transition: background 2s ease;
}

/* Phase variants */
.crowd-phase-aura.phase-accumulation {
  background: radial-gradient(
    ellipse at center,
    rgba(34, 197, 94, 0.08) 0%,
    rgba(34, 197, 94, 0.04) 40%,
    transparent 70%
  );
}

.crowd-phase-aura.phase-distribution {
  background: radial-gradient(
    ellipse at center,
    rgba(59, 130, 246, 0.08) 0%,
    rgba(59, 130, 246, 0.04) 40%,
    transparent 70%
  );
}

.crowd-phase-aura.phase-panic {
  background: radial-gradient(
    ellipse at center,
    rgba(239, 68, 68, 0.12) 0%,
    rgba(239, 68, 68, 0.06) 40%,
    transparent 70%
  );
}

.crowd-phase-aura.phase-neutral {
  background: radial-gradient(
    ellipse at center,
    rgba(156, 163, 175, 0.06) 0%,
    rgba(156, 163, 175, 0.03) 40%,
    transparent 70%
  );
}

/* ================================ */
/* INTENT VECTOR TRACE              */
/* ================================ */

.intent-vector-trace {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 40%;
  height: 2px;
  background: linear-gradient(
    90deg,
    rgba(147, 51, 234, 0.8) 0%,
    rgba(147, 51, 234, 0.4) 50%,
    transparent 100%
  );
  transform-origin: left center;
  transform: translate(0, -50%) rotate(var(--vector-angle, 0deg));
  animation: vectorPulse 2s ease-in-out infinite;
  mix-blend-mode: screen;
  filter: blur(2px);
}

@keyframes vectorPulse {
  0%,
  100% {
    opacity: 0.5;
  }
  50% {
    opacity: 1;
  }
}

/* Vector type */
.intent-vector-trace.source-bagbot {
  background: linear-gradient(
    90deg,
    rgba(147, 51, 234, 0.8) 0%,
    rgba(147, 51, 234, 0.4) 50%,
    transparent 100%
  );
}

.intent-vector-trace.source-market {
  background: linear-gradient(
    90deg,
    rgba(59, 130, 246, 0.8) 0%,
    rgba(59, 130, 246, 0.4) 50%,
    transparent 100%
  );
}

.intent-vector-trace.source-user {
  background: linear-gradient(
    90deg,
    rgba(34, 197, 94, 0.8) 0%,
    rgba(34, 197, 94, 0.4) 50%,
    transparent 100%
  );
}

/* ================================ */
/* PERFORMANCE OPTIMIZATIONS        */
/* ================================ */

/* GPU acceleration for all effects */
.collective-field * {
  will-change: transform, opacity;
  backface-visibility: hidden;
  transform: translateZ(0);
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .collective-field * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ================================ */
/* COMPOSITE LAYERS                 */
/* ================================ */

.collective-field-layer-background {
  z-index: 1;
}

.collective-field-layer-mid {
  z-index: 2;
}

.collective-field-layer-foreground {
  z-index: 3;
}

/* ================================ */
/* BLEND MODE VARIATIONS            */
/* ================================ */

.blend-screen {
  mix-blend-mode: screen;
}

.blend-multiply {
  mix-blend-mode: multiply;
}

.blend-overlay {
  mix-blend-mode: overlay;
}

.blend-soft-light {
  mix-blend-mode: soft-light;
}
