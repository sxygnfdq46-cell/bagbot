/**
 * ðŸŒŠ REFLEX VISUAL EFFECTS
 * 
 * CSS for all reflex system visual effects
 * Emergency pulses, cooling cycles, stasis filters, etc.
 */

/* ============================================
   REFLEX OVERLAY BASE
   ============================================ */

.reflex-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  mix-blend-mode: screen;
  opacity: 0;
  transition: opacity 0.1s ease-out;
}

/* ============================================
   1. EMERGENCY PULSE (red-violet)
   ============================================ */

.reflex-defensive-pulse,
.reflex-emergency-pulse,
.reflex-stabilization {
  animation: emergency-pulse var(--reflex-duration, 2000ms) ease-out forwards;
  background: radial-gradient(
    circle at 50% 50%,
    rgba(221, 34, 102, calc(var(--reflex-intensity, 0.7) * 0.4)),
    rgba(136, 17, 85, calc(var(--reflex-intensity, 0.7) * 0.2)),
    transparent 70%
  );
}

@keyframes emergency-pulse {
  0% {
    opacity: 0;
    transform: scale(0.95);
  }
  15% {
    opacity: 1;
    transform: scale(1.0);
  }
  40% {
    opacity: 0.8;
  }
  100% {
    opacity: 0;
    transform: scale(1.02);
  }
}

/* ============================================
   2. REFLEX FLASH (white-blue strike)
   ============================================ */

.reflex-flash {
  animation: reflex-flash 300ms ease-out forwards;
  background: radial-gradient(
    ellipse at 50% 50%,
    rgba(255, 255, 255, calc(var(--reflex-intensity, 0.8) * 0.6)),
    rgba(102, 204, 255, calc(var(--reflex-intensity, 0.8) * 0.3)),
    transparent 60%
  );
}

@keyframes reflex-flash {
  0% {
    opacity: 1;
    transform: scale(1.0);
  }
  50% {
    opacity: 0.9;
  }
  100% {
    opacity: 0;
    transform: scale(1.1);
  }
}

/* ============================================
   3. EXPANSION GLOW (warm confident)
   ============================================ */

.reflex-expansion-glow,
.reflex-stable-expansion,
.reflex-recovery-glow {
  animation: expansion-glow var(--reflex-duration, 3000ms) ease-out forwards;
  background: radial-gradient(
    circle at 50% 50%,
    rgba(255, 204, 102, calc(var(--reflex-intensity, 0.6) * 0.3)),
    rgba(255, 153, 51, calc(var(--reflex-intensity, 0.6) * 0.2)),
    rgba(204, 102, 51, calc(var(--reflex-intensity, 0.6) * 0.1)),
    transparent 75%
  );
}

@keyframes expansion-glow {
  0% {
    opacity: 0;
    transform: scale(0.98);
    filter: blur(0px);
  }
  20% {
    opacity: 1;
  }
  50% {
    transform: scale(1.03);
    filter: blur(8px);
  }
  100% {
    opacity: 0;
    transform: scale(1.08);
    filter: blur(16px);
  }
}

/* ============================================
   4. RAPID COOLING (cyan thermal)
   ============================================ */

.reflex-rapid-cooling {
  animation: rapid-cooling var(--reflex-duration, 1500ms) ease-in-out forwards;
  background: linear-gradient(
    180deg,
    rgba(34, 221, 221, calc(var(--reflex-intensity, 0.7) * 0.4)),
    rgba(17, 153, 204, calc(var(--reflex-intensity, 0.7) * 0.3)),
    rgba(34, 85, 153, calc(var(--reflex-intensity, 0.7) * 0.2)),
    transparent
  );
}

@keyframes rapid-cooling {
  0% {
    opacity: 0;
    transform: translateY(-100%);
  }
  15% {
    opacity: 1;
    transform: translateY(0%);
  }
  40% {
    opacity: 0.9;
  }
  100% {
    opacity: 0;
    transform: translateY(10%);
  }
}

/* ============================================
   5. STASIS FILTER (blue calm layer)
   ============================================ */

.reflex-stasis-filter {
  animation: stasis-filter var(--reflex-duration, 4000ms) ease-in-out forwards;
  background: rgba(34, 102, 221, calc(var(--reflex-intensity, 0.6) * 0.25));
  backdrop-filter: blur(8px) brightness(0.95);
}

@keyframes stasis-filter {
  0% {
    opacity: 0;
  }
  20% {
    opacity: 1;
  }
  80% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

/* ============================================
   6. POLARITY SHIFT (yellow-white)
   ============================================ */

.reflex-polarity-shift {
  animation: polarity-shift var(--reflex-duration, 5000ms) ease-in-out forwards;
  background: radial-gradient(
    circle at 50% 50%,
    rgba(255, 255, 136, calc(var(--reflex-intensity, 0.7) * 0.3)),
    rgba(255, 204, 68, calc(var(--reflex-intensity, 0.7) * 0.2)),
    transparent 70%
  );
}

@keyframes polarity-shift {
  0% {
    opacity: 0;
    transform: rotate(0deg) scale(1);
  }
  15% {
    opacity: 1;
  }
  50% {
    transform: rotate(180deg) scale(1.05);
  }
  85% {
    opacity: 1;
  }
  100% {
    opacity: 0;
    transform: rotate(360deg) scale(1.1);
  }
}

/* ============================================
   7. SHOCK ABSORPTION (ripple dampening)
   ============================================ */

.reflex-shock-absorption {
  animation: shock-absorption var(--reflex-duration, 1500ms) ease-out forwards;
  background: radial-gradient(
    circle at 50% 50%,
    rgba(255, 68, 68, 0) 0%,
    rgba(255, 68, 68, calc(var(--reflex-intensity, 0.7) * 0.4)) 30%,
    rgba(255, 68, 68, calc(var(--reflex-intensity, 0.7) * 0.2)) 50%,
    transparent 70%
  );
}

@keyframes shock-absorption {
  0% {
    opacity: 1;
    transform: scale(0.5);
  }
  30% {
    opacity: 1;
    transform: scale(1.0);
  }
  60% {
    opacity: 0.6;
    transform: scale(1.2);
  }
  100% {
    opacity: 0;
    transform: scale(1.5);
  }
}

/* ============================================
   8. MOMENTUM BRACE (blue reinforcement)
   ============================================ */

.reflex-momentum-brace {
  animation: momentum-brace var(--reflex-duration, 2500ms) ease-out forwards;
  background: radial-gradient(
    circle at 50% 50%,
    rgba(68, 68, 255, calc(var(--reflex-intensity, 0.7) * 0.35)),
    rgba(51, 102, 204, calc(var(--reflex-intensity, 0.7) * 0.25)),
    rgba(34, 68, 136, calc(var(--reflex-intensity, 0.7) * 0.15)),
    transparent 75%
  );
  box-shadow: 
    inset 0 0 100px rgba(68, 68, 255, calc(var(--reflex-intensity, 0.7) * 0.3)),
    inset 0 0 50px rgba(51, 102, 204, calc(var(--reflex-intensity, 0.7) * 0.2));
}

@keyframes momentum-brace {
  0% {
    opacity: 0;
    transform: scale(1.05);
  }
  20% {
    opacity: 1;
    transform: scale(1.0);
  }
  40% {
    box-shadow: 
      inset 0 0 150px rgba(68, 68, 255, calc(var(--reflex-intensity, 0.7) * 0.4)),
      inset 0 0 75px rgba(51, 102, 204, calc(var(--reflex-intensity, 0.7) * 0.3));
  }
  100% {
    opacity: 0;
    transform: scale(0.98);
  }
}

/* ============================================
   9. STORM DEFENSE (combined protection)
   ============================================ */

.reflex-storm-defense {
  animation: storm-defense 3000ms ease-in-out forwards;
  background: 
    radial-gradient(
      circle at 50% 50%,
      rgba(136, 68, 187, calc(var(--reflex-intensity, 0.7) * 0.3)),
      rgba(85, 51, 136, calc(var(--reflex-intensity, 0.7) * 0.2)),
      transparent 70%
    );
  backdrop-filter: contrast(1.1) saturate(0.9);
}

@keyframes storm-defense {
  0%, 100% {
    opacity: 0;
  }
  20%, 80% {
    opacity: 1;
  }
  50% {
    transform: scale(1.02);
  }
}

/* ============================================
   10. STABILITY VEIL (holographic calm)
   ============================================ */

.stability-veil {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  background: linear-gradient(
    180deg,
    rgba(102, 204, 255, 0.03),
    rgba(153, 204, 255, 0.05),
    rgba(102, 153, 255, 0.03)
  );
  opacity: var(--stability-veil-opacity, 0);
  transition: opacity 0.8s ease-in-out;
  z-index: 8999;
}

.stability-active .stability-veil {
  --stability-veil-opacity: 1;
}

/* ============================================
   11. DRIFT DAMPENER (smoothing layer)
   ============================================ */

.drift-dampened {
  transition: transform calc(var(--reflex-drift-speed, 0.5) * 2000ms) ease-out !important;
}

.drift-dampened * {
  transition: transform calc(var(--reflex-drift-speed, 0.5) * 1500ms) ease-out;
}

/* ============================================
   12. AFTERSHOCK DISSIPATION
   ============================================ */

.aftershock-ripple {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 200px;
  height: 200px;
  margin: -100px 0 0 -100px;
  border-radius: 50%;
  border: 2px solid rgba(255, 255, 255, 0.3);
  pointer-events: none;
  animation: aftershock-dissipate 2000ms ease-out forwards;
  z-index: 9100;
}

@keyframes aftershock-dissipate {
  0% {
    transform: scale(0.5);
    opacity: 1;
    border-width: 3px;
  }
  50% {
    border-width: 2px;
  }
  100% {
    transform: scale(4);
    opacity: 0;
    border-width: 1px;
  }
}

/* ============================================
   REFLEX MODE CLASSES
   ============================================ */

.reflex-mode-defensive {
  --reflex-primary-hue: 340;
  --reflex-mode-saturation: 0.8;
}

.reflex-mode-aggressive {
  --reflex-primary-hue: 30;
  --reflex-mode-saturation: 0.9;
}

.reflex-mode-calm {
  --reflex-primary-hue: 200;
  --reflex-mode-saturation: 0.6;
}

/* ============================================
   THERMAL STATES
   ============================================ */

.system-overheating {
  filter: hue-rotate(15deg) saturate(1.2);
}

.system-overheating::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(255, 102, 51, 0.08);
  animation: thermal-pulse 2000ms ease-in-out infinite;
  pointer-events: none;
  z-index: 8998;
}

@keyframes thermal-pulse {
  0%, 100% {
    opacity: 0.5;
  }
  50% {
    opacity: 1;
  }
}

/* ============================================
   PERFORMANCE OPTIMIZATIONS
   ============================================ */

.reflex-overlay,
.stability-veil,
.aftershock-ripple {
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  .reflex-overlay,
  .stability-veil {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}
